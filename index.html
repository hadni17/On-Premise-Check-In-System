<!DOCTYPE html>
<html lang="en">
  <head>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/webrtc-adapter/3.3.3/adapter.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.1.10/vue.min.js"></script>
    <script type="text/javascript" src="https://rawgit.com/schmich/instascan-builds/master/instascan.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://code.iconify.design/2/2.0.4/iconify.min.js"></script>

    <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Lora:ital@1&display=swap" rel="stylesheet">

    <title>Paksi Cantik</title>

    <style>
        input:checked ~ .radio {
      color:white;
      background-color: green;
    }
    </style>
  </head>
    <body>
        <div class="container">
            <section class="w-4/5 mx-auto pt-20 pb-40 bg-contain bg-bottom" style="background-color: #EAEAEA; background-image: url('assets/bg.png'); "> 

                <!-- head -->
                <div class="flex items-center">
                    <div class="pl-10"><span class="iconify text-4xl" data-icon="bi:arrow-left-short"></span></div>
                    <h1 class="text-3xl mx-auto font-semibold" style="font-family: 'Montserrat', sans-serif;">QR Scan</h1>
                </div> 
                <!-- qr scan -->
                    <div class="card relative w-3/4 p-6 mt-5 border rounded-xl bg-white mx-auto">
                            <video id="preview" class="rounded-xl" width="100%" ></video>
                            <div id="qr-shaded-region" class="flex rounded-xl" style="position: absolute;margin: 24px 24px 52px 24px; border-width: 45px 135px; border-style: solid; border-color: rgba(0, 0, 0, 0.48); box-sizing: border-box; inset: 0px;"></div>
                            <p class="mt-3" style="font-family:'Lora', serif;text-align: center;font-size: 11px;">arahkan QR kedalam kotak.</p>
                    </div>
                    <!-- button camera -->
                    <div class="flex justify-center items-center mt-5">
                        <div data-toggle="buttons">
                            <div class="inline-flex rounded-lg">
                                <input type="radio" name="room_type"  value="1" id="roomPrivate" checked hidden/>
                                <label for="roomPrivate" class="radio text-center self-center py-2 px-4 rounded-lg cursor-pointer hover:opacity-75">Front Camera</label>
                            </div>
                            <div class="inline-flex rounded-lg">
                                <input type="radio" name="room_type" value="2" id="roomPublic" hidden/>
                                <label for="roomPublic" class="radio text-center self-center py-2 px-4 rounded-lg cursor-pointer hover:opacity-75">Back Camera</label>
                            </div>
                        </div>
                    </div>

                    <!-- search bar  -->
                    <div class="p-6 mt-2">
                        <div class="bg-white flex w-3/4 items-center rounded-xl shadow-xl mx-auto">
                            <input class="rounded-xl w-full py-1 px-6 text-gray-700 leading-tight focus:outline-none" id="text" type="text" placeholder="Search Your Participant ID">
                          <div class="p-4">
                            <button class="text-white rounded-full p-2 hover:bg-blue-400 focus:outline-none w-12 h-12 flex items-center justify-center">
                                <img src="assets/search.png">
                            </button>
                           </div>
                        </div>
                    </div>

            </section>    
         </div>
  
        <script>
           let scanner = new Instascan.Scanner({ video: document.getElementById('preview'),scanPeriod: 5});
           scanner.addListener('scan',function(content){
               alert(content);
            //    window.location.href=content;
            });
           Instascan.Camera.getCameras().then(function(cameras){
               if(cameras.length > 0 ){
                   scanner.start(cameras[0]);
                    $('[name="options"]').on('change',function(){
                    if($(this).val()==1){
                        if(cameras[0]!=""){
                            scanner.start(cameras[0]);
                        }else{
                            alert('No Front camera found!');}
                    } else if($(this).val()==2){
                        if(cameras[1]!=""){
                            scanner.start(cameras[1]);
                        }else{
                            alert('No Back camera found!');
                        }
                    }
                });
               } else{
                   alert('No cameras found');
                }
           }).catch(function(e) {
               console.error(e);
                alert(e);
           });        

           scanner.addListener('scan',function(c){
               document.getElementById('text').value=c;
           });
        </script>
    </body>
</html>